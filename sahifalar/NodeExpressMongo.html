<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style/style.css">
    <link rel="icon"
        href="https://w7.pngwing.com/pngs/780/57/png-transparent-node-js-javascript-database-mongodb-native-miscellaneous-text-trademark.png">
    <title>Node Express Mongo</title>
</head>

<body>
    <div>
        <h1>package.json</h1>
        <p><b>npm init</b></p>
        <p><b>npm init -y</b> - default ma'lumotlar bilan yuklab beradi</p>
    </div>
    <div>
        <h2>__dirname & __filename</h2>
        <a href="../images/node/1.jpg"><img src="../images/node/1.jpg" alt="node2"></a>
    </div>
    <div>
        <h2>require, module.exports</h2>
        <a href="../images/node/2.jpg"><img src="../images/node/2.jpg" alt="node2"></a>
    </div>
    <div>
        <h2>path, path.basename, path.dirname, path.extname, path.parse, path.join, path.resolve</h2>
        <a href="../images/node/3.jpg"><img src="../images/node/3.jpg" alt="node3"></a>
    </div>
    <div>
        <h2>fs.mkdir</h2>
        <p><b>mkdir</b>papka yaratadi <br>
            <b>writeFile</b> - fayl yaratadi (.js, .html, css, ...)
        </p> <br>

        <a href="../images/node/4.jpg"><img src="../images/node/4.jpg" alt="node4"></a> <br><br>
        <a href="../images/node/5.jpg"><img src="../images/node/5.jpg" alt="node5"></a>
        <hr><br>
        <p><b>fs.readFile</b> - Faylni o'qiydi</p><br>
        <a href="../images/node/6.jpg"><img src="../images/node/6.jpg" alt="node6"></a>
        <hr><br>
        <p><b>fs.rename</b> - fayl nomini o'zgartiradi</p><br>
        <a href="../images/node/7.jpg"><img src="../images/node/7.jpg" alt="node7"></a>
    </div>
    <div>
        <h2>Module OS</h2>
        <p>
            <b>os.platform(), os.arch()</b><br><br>
        </p>
        <a href="../images/node/8.jpg"><img src="../images/node/8.jpg" alt="node8"></a>
        <hr><br>
        <b>os.cpus</b> - protsessor ma'lumotlarini (har bir patogini ma'lumotlarini) ko'rsatadi <br><br>
        <a href="../images/node/9.jpg"><img src="../images/node/9.jpg" alt="node9"></a>
        <hr><br>
        <b>os.freemem(), os.totalmem(), os.homedir(), os.uptime(), os.hostname()</b><br><br>
        <a href="../images/node/10.jpg"><img src="../images/node/10.jpg" alt="node10"></a>
    </div>
    <div>
        <h2>Module EVENTS</h2>
        <a href="../images/node/11.jpg"><img src="../images/node/11.jpg" alt="node11"></a>
    </div>
    <div>
        <h2>Module HTTP</h2>
        <b>http, res, req, res.write, res.end, server.listen, http.createServer</b>
        <a href="../images/node/12.jpg"><img src="../images/node/12.jpg" alt="node12"></a>
    </div>
    <div>
        <h2>13.11 Web-Server yasash va HTML sahifa</h2>
        <a href="../images/node/13.jpg"><img src="../images/node/13.jpg" alt="node13"></a>
        <hr><br>
        <a href="../images/node/14.jpg"><img src="../images/node/14.jpg" alt="node14"></a>
    </div>
    <div>
        <h2>REST-Server va Console bilan ishlash</h2>
        <a href="../images/node/15.jpg"><img src="../images/node/15.jpg" alt="node15"></a>
    </div>
    <div>
        <h2>16.13 Express JS nima va Serverni ishga tushirish</h2>
        <b>express, get, listen</b><br>
        <a href="../images/node/16.jpg"><img src="../images/node/16.jpg" alt="node16"></a>
    </div>
    <div>
        <h2>17.14 Express http request (http so'rovlar)</h2>
        <b>respone.send(), res.send()</b><br>
        <a href="../images/node/17.jpg"><img src="../images/node/17.jpg" alt="node17"></a>
        <hr><br>
        <b>response.sendStatus(), res.sendStatus()</b><br>
        <a href="../images/node/18.jpg"><img src="../images/node/18.jpg" alt="node18"></a>
        <hr><br>
        <b>status</b><br>
        <a href="../images/node/19.jpg"><img src="../images/node/19.jpg" alt="node19"></a>
        <hr><br>
        <b>json</b> - ma'lumot turi obyekt bo'lishi kerak <br>
        <a href="../images/node/20.jpg"><img src="../images/node/20.jpg" alt="node20"></a>
        <hr><br>
        <b>download</b> - <i>/download</i> ga o'tkanda index.js fayli yuklanadi. <i>/dosnload</i> sahifaga o'tmidi<br>
        <a href="../images/node/21.jpg"><img src="../images/node/21.jpg" alt="node21"></a>
        <hr><br>
        <b>sendFile()</b> - <b><i>send</i></b>ni o'rniga ishlatiladi. HTML faylni ulashda ishlatiladi <br>
        <a href="../images/node/22.jpg"><img src="../images/node/22.jpg" alt="node22"></a>
    </div>
    <!-- Ejs dvijok -->
    <div>
        <h2>18.15 Express dvijok</h2>
        <b>ejs</b>

        <p>
            <a href="https://ejs.co/" target="_blank">EJS veb sayti</a><br><br>
            <i>npm install ejs</i>
        </p><br><br>
        <a href="../images/node/23.jpg"><img src="../images/node/23.jpg" alt="node23"></a>
    </div>
    <!-- /Ejs dvijok -->

    <div>
        <h2>19.16 Router</h2>
        <b>router, route, params express.Router</b><br><br>
        <a href="../images/node/24.jpg"><img src="../images/node/24.jpg" alt="node24"></a>
    </div>
    <div>
        <h2>20.17 Params funktsiyasi</h2>
        <b>router.param, next()</b><br><br>
        <a href="../images/node/25.jpg"><img src="../images/node/25.jpg" alt="node25"></a>
    </div>
    <div>
        <h2>21.18 Middleware haqida batafsil</h2>
        <p>
            Ma'lum biror sahifaga ulanganda ishga tushadigan funksional <br> <br>
            Quyidagida barcha sahifa uchun <b>middleware</b> <br>
        </p>
        <a href="../images/node/26.jpg"><img src="../images/node/26.jpg" alt="node26"></a>
        <hr><br>
        <p>Quyidagida belgilangan sahifalar uchun <b>middleware</b></p><br>
        <a href="../images/node/27.jpg"><img src="../images/node/27.jpg" alt="node27"></a>
        <hr><br>
        <p>Bir nechta <b>middleware</b> yozish mumkin</p><br>
        <a href="../images/node/28.jpg"><img src="../images/node/28.jpg" alt="node28"></a>
    </div>
    <div>
        <h2>22.19 Public filellar / Public fayllar</h2>
        <b>faylni static qilish</b><br><br>
        <a href="../images/node/29.jpg"><img src="../images/node/29.jpg" alt="node29"></a>
    </div>
    <div>
        <h2>24.20 MongoDB haqida batafsil. To'liq video</h2>
        <p>
            <b>db.users.insertOne</b> - (users fayliga) ma'lumot qo'shadi
        </p><br>
        <a href="../images/node/30.jpg"><img src="../images/node/30.jpg" alt="node30"></a>
        <hr><br>
        <b>db.users.insertMany</b> - bir nechta ma'lumot qo'shadi <br><br>
        <a href="../images/node/31.jpg"><img src="../images/node/31.jpg" alt="node31"></a>
        <hr><br>
        <b>db.users.find().limit(2)</b> <br>
        <p><b>find()</b> - hamma ma'lumotni qaytaradi. <br>
            <b>limit(2)</b> - 2 ta element qaytaradi
        </p> <br>
        <a href="../images/node/32.jpg"><img src="../images/node/32.jpg" alt="node32"></a>
        <hr><br>
        <b>sort</b><br>
        <p><b>db.users.find().sort({age: 1})</b> - <b>age</b> bo'yicha o'sish tartibida joylashtirib beradi. <b>-1</b>
            bo'lsa kamayish tartibida joylashadi</p><br>
        <a href="../images/node/33.jpg"><img src="../images/node/33.jpg" alt="node33"></a>
        <hr><br>
        <p>
            <b>_id</b> ni ko'rsatmaslik yo'li <br>
            <b>db.users.find({}, {_id: 0}).sort({age: -1})</b> - usersdagi ma'lumotlar bilan ishlaydi <br><br>
        </p>
        <a href="../images/node/34.jpg"><img src="../images/node/34.jpg" alt="node34"></a>
        <hr><br>
        <p>
            <b>db.users.find({age: 20}, {_id: 0})</b> - <b>age</b> 20 ga teng bo'lganlarni qaytaradi
        </p><br>
        <a href="../images/node/35.jpg"><img src="../images/node/35.jpg" alt="node35"></a>
        <hr><br>
        <p>
            <b>db.users.find({$or: [{age: 20}, {email: "yusuf@gmail.com"}]}, {_id: 0})</b> - <b>age</b> yoki
            <b>email</b> mos bo'lsa qaytaradi
        </p><br>
        <a href="../images/node/36.jpg"><img src="../images/node/36.jpg" alt="node36"></a>
        <hr><br>
        <p>
            <b>db.users.find({age: {$gt: 20}}, {_id: 0})</b> - <b>age</b> 20 dan kattalarni qaytaradi
        </p><br>
        <a href="../images/node/38.jpg"><img src="../images/node/38.jpg" alt="node38"></a>

        <div>
            <h2>Comparison Query Operators | Taqqoslash so'rovi operatori</h2>
            <a href="../images/node/37.jpg"><img src="../images/node/37.jpg" alt="node37"></a>
        </div>
        <div>
            <h3>Ma'lumotni tahrirlash</h4>
                <p><i>Agar yo'q ma'lumot o'zgartirilsa shu ma'lumot qo'shilib qoladi</i></p>
                <p>
                    <b>db.users.updateOne({age: 20}, {$set: {age: 21}})</b> - age 20 ga teng bo'lganni birinchisini
                    yoshini
                    21 ga o'zgartiradi <br>
                    <b>db.users.updateOne({age: 20}, {$set: {age: 21, name: "Nozimbek", email: "nozim@gmail.com"}})</b>
                    -
                    age 20 ga teng bo'lganni birinchisini age, name, email ni o'zgartiradi <br>
                    <i><b>updateMany</b> dan foydalanish tavsiya qilinadi tavsiya qilinadi</i><br>
                    <b>db.users.updateMany({age: 20}, {$set: {age: 21}})</b> - age 20 ga teng bo'lganni birinchisini
                    yoshini
                    21 ga o'zgartiradi <br><br>
                    <b>db.user.replaceOne({age: 19}, {name: "Yusufxon", isMarried: true})</b>

                </p>
                <h3>deleteMany, deleteOne</h3>
                <a href="../images/node/39.jpg"><img src="../images/node/39.jpg" alt="node39"></a>
                <hr><br>
                <p>
                    <b>bulkWrite</b> - ma'lumot qo'shadi, o'zgartiradi, o'chiradi <br><br>
                <p>
                    <b>insertOne</b> - ma'lumot qo'shadi <br>
                    <b>deleteOne & deleteMany</b> - ma'lumot o'chiradi <br>
                    <b>updateOne & updateMany</b> - ma'lumot o'zgartiradi
                </p><br>
                <a href="../images/node/40.jpg"><img src="../images/node/40.jpg" alt="node40"></a>
                </p>
        </div>
    </div>
    <div>
        <h2>28.24 Loyihani shablonizatsiya qilish</h2>
        <h3>express-edge</h2>
            <p>
                O'rnatish <b>npm i express-edge</b><br><br>
                ulash <b>@layout("<i>fayl manzili</i>")</b><br>
                komment alohida qatorda bo'lishi kerak <br>
                <b>@section("name")</b> va <b>@endsection</b> bo'lishi kerak va orasiga yoziladi

            </p><br><br>
            <a href="../images/node/41.jpg"><img src="../images/node/41.jpg" alt="node41"></a>
    </div>
    <div>
        <h2>30.26 Ma'lumotlar bazasi bilan test qilish / MongoDB / mongoose</h2>
        <p>
            <b>mongoose.connect</b> - ma'lumot bazasiga ulanish uchun ishlatilinadi <br>
            <b>mongoose.Schema()</b> <br>
            <b>mongoose.model()</b><br>
            <b>create()</b> <br><br>
            <b>err</b> bo'lmagani uchun <b>null</b>ga teng bo'ladi
        </p><br>
        <a href="../images/node/42.jpg"><img src="../images/node/42.jpg" alt="node42"></a>
        <hr><br>
        <p>
            <b>find()</b> - ma'lumotlarni ko'rsatadi
        </p><br>
        <a href="../images/node/43.jpg"><img src="../images/node/43.jpg" alt="node43"></a>
        <hr><br>
        <p><b>findById()</b> - ma'lumotni id bo'yicha qidiradi</p><br>
        <a href="../images/node/44.jpg"><img src="../images/node/44.jpg" alt="node44"></a>
        <hr><br>
        <p><b>findByIdAndUpdate()</b> - ma'lumotni id bo'yicha topib o'zgartiradi va eski ma'lumotni qaytaradi</p><br>
        <a href="../images/node/45.jpg"><img src="../images/node/45.jpg" alt="node45"></a>
    </div>

    <div>
        <h2>3.0.27</h2>
        <h4>redirect() - yo'naltirish</h4>
        <p>Boshqa sahifaga o'tkazadi. Eski oynadan o'zgartiradi yangi oyna yaratmasdan</p><br><br>
        <a href="../images/node/46.jpg"><img src="../images/node/46.jpg" alt="node46"></a>
        <hr><br>
        <b>json</b>formati va <b>extencion</b>lar bilan ishlash va ma'lumot yuborish uchunulab olish kerak quyidagicha
        <br><br>
        <b>
            app.use(express.json()); <br>
            app.use(express.urlencoded({extended: true}));
        </b><br><br>
        <a href="../images/node/47.jpg"><img src="../images/node/47.jpg" alt="node47"></a>
        <hr><br><br>
        <h4>user orqali inputdan ma'lumot to'ldirish / inputdan ma'lumotlar omboriga ma'lumot qo'shish</h4><br>
        <a href="../images/node/48.jpg"><img src="../images/node/48.jpg" alt="node48"></a>

    </div>
    <div>
        <h2>3.0.27</h2>
        <h4>Middleware</h4>
        <p>Middleware ko'dni o'rtasida ishga tushadi <br>
            <b>next()</b> middlewareni tugashini bildiradi. yozilmasa sahifa to'htab qolishiga sabab bo'ladi
        </p><br>
        <a href="../images/node/49.jpg"><img src="../images/node/49.jpg" alt="node49"></a>
        <hr><br>
        <p>Quyida faqat belgilangan sahifalarda middlewareni ishlatish usuli</p><br>
        <a href="../images/node/50.jpg"><img src="../images/node/50.jpg" alt="node50"></a>
    </div>
    <div>
        <h3>toDateString()</h3>
        <p>
            <b>Date</b>ni chiroyli ko'rinishga o'tkazadi
        </p>
    </div>
    <div>
        <h2>bcrypt</h2>
        <p>
            npm i bcrypt <br>
            <i>Linux uchun</i> npm i bcryptjs <br><br>
            <br>
            Parolni shifrlaydi
        </p><br>
        <div>

            <b>Parolni shifrlash</b>
            <textarea name="" id="" cols="30" rows="14">
            const User = require("../models/User")
            const bcrypt = require("bcryptjs")
            
            module.exports = (req, res) => {
                User.create(req.body, async (err, user)=>{
                     if(err){
                        return res.redirect("/reg")
                     }
                     const salt = await bcrypt.genSalt(10)
                     user.password = await bcrypt.hash(user.password, salt);
                     user.save()
                     res.redirect("/")
                })
            }
        </textarea>
        </div>
        <div>
            <b>kiritilgan parol bilan hashlangan parolni solishtirish 1</b>
            <textarea name="" id="" cols="30" rows="21">
                const User = require("../models/User")
                const bcrypt = require("bcryptjs")
                
                module.exports = (req, res) => {
                    const { password, email } = req.body
                    User.findOne({ email }, (err, user) => {
                        if (user) {
                            bcrypt.compare(password, user.password, (err, same) => {    // kiritilgan parol bilan hashlangani bilan
                                if (same) {
                                    res.redirect("/")
                                } else {
                                    res.redirect("/login")
                                }
                            })
                        } else {
                            return res.redirect("/login")
                        }
                    })
                    res.render("login")
                }
            </textarea><br>
            <hr>
            <b>2 - yo'li soddaroq</b> <br>
            <textarea name="" id="" cols="30" rows="13">
                const User = require("../models/User")
const bcrypt = require("bcryptjs")

module.exports = (req, res) => {
    const { password, email } = req.body
    User.findOne({ email }, async (err, user) => {
        if (user) {
            const validPassword = await bcrypt.compare(password, user.password);
            if (validPassword){
                res.redirect("/")
            } else {
                res.redirect("/login")
            }
        } else {
            return res.redirect("/login")
        }
    })
}
            </textarea>
        </div>
    </div>
</body>

</html>